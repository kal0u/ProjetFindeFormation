{"ast":null,"code":"var _jsxFileName = \"/home/kalou/My Tuto/ProjetFindeFormation/front/src/user/components/UserProfile.js\";\nimport React, { useState, useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport Card from \"../../shared/components/UIElement/Card\";\nimport Button from \"../../shared/components/FormElements/Button\";\nimport Modal from \"../../shared/components/UIElement/Modal\";\nimport ErrorModal from \"../../shared/components/UIElement/ErrorModal\";\nimport LoadingSpinner from \"../../shared/components/UIElement/LoadingSpinner\";\nimport { AuthContext } from \"../../shared/context/auth-context\";\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\nimport \"./UserProfile.css\";\n\nconst UserProfile = props => {\n  const {\n    isLoading,\n    error,\n    sendRequest,\n    clearError\n  } = useHttpClient();\n  const auth = useContext(AuthContext);\n  const [showModal, setShowModal] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n  const userId = useParams().userId;\n\n  const openModalHandler = () => setShowModal(true);\n\n  const closeModalHandler = () => setShowModal(false);\n\n  const showDeleteWarningHandler = () => {\n    setShowConfirmModal(true);\n  };\n\n  const cancelDeleteHandler = () => {\n    setShowConfirmModal(false);\n  };\n\n  const confirmDeleteHandler = async () => {\n    setShowConfirmModal(false);\n\n    try {\n      await sendRequest(`http://localhost:5000/api/users/profile/delete/${userId}`, \"DELETE\", null, {\n        Authorization: \"Bearer \" + auth.token\n      });\n      props.onDeleteUser(userId);\n    } catch (err) {}\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ErrorModal, {\n    error: error,\n    onClear: clearError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Modal, {\n    show: showModal,\n    onCancel: closeModalHandler,\n    header: props.location,\n    contentClass: \"place-item__modal-content\",\n    footerClass: \"place-item__modal-actions\",\n    footer: /*#__PURE__*/React.createElement(Button, {\n      onClick: closeModalHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }\n    }, \"CLOSE\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, \"DISPLAY MODAL\")), /*#__PURE__*/React.createElement(Modal, {\n    show: showConfirmModal,\n    onCancel: cancelDeleteHandler,\n    header: \"Are you sure ?\",\n    footerClass: \"place-item__modal-actions\",\n    footer: /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      inverse: true,\n      onClick: cancelDeleteHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }\n    }, \"CANCEL\"), /*#__PURE__*/React.createElement(Button, {\n      danger: true,\n      onClick: confirmDeleteHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, \"DELETE\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"Do you want to proceed and delete your profile ?\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"place-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"place-item__content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, isLoading && /*#__PURE__*/React.createElement(LoadingSpinner, {\n    asOverlay: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"place-item__info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, props.items.login), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, props.items.email)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"place-item__actions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, auth.userId === props.items.id && /*#__PURE__*/React.createElement(Button, {\n    to: `/profile/${props.items.id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }, \"EDIT\"), auth.userId === props.items.id && /*#__PURE__*/React.createElement(Button, {\n    danger: true,\n    onClick: showDeleteWarningHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }, \"DELETE\")))));\n};\n\nexport default UserProfile;","map":{"version":3,"sources":["/home/kalou/My Tuto/ProjetFindeFormation/front/src/user/components/UserProfile.js"],"names":["React","useState","useContext","useParams","Card","Button","Modal","ErrorModal","LoadingSpinner","AuthContext","useHttpClient","UserProfile","props","isLoading","error","sendRequest","clearError","auth","showModal","setShowModal","showConfirmModal","setShowConfirmModal","userId","openModalHandler","closeModalHandler","showDeleteWarningHandler","cancelDeleteHandler","confirmDeleteHandler","Authorization","token","onDeleteUser","err","location","items","login","email","id"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport Card from \"../../shared/components/UIElement/Card\";\nimport Button from \"../../shared/components/FormElements/Button\";\nimport Modal from \"../../shared/components/UIElement/Modal\";\nimport ErrorModal from \"../../shared/components/UIElement/ErrorModal\";\nimport LoadingSpinner from \"../../shared/components/UIElement/LoadingSpinner\";\nimport { AuthContext } from \"../../shared/context/auth-context\";\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\n\nimport \"./UserProfile.css\";\n\nconst UserProfile = (props) => {\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n  const auth = useContext(AuthContext);\n  const [showModal, setShowModal] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n\n  const userId = useParams().userId;\n\n  const openModalHandler = () => setShowModal(true);\n\n  const closeModalHandler = () => setShowModal(false);\n\n  const showDeleteWarningHandler = () => {\n    setShowConfirmModal(true);\n  };\n\n  const cancelDeleteHandler = () => {\n    setShowConfirmModal(false);\n  };\n\n  const confirmDeleteHandler = async () => {\n    setShowConfirmModal(false);\n    try {\n      await sendRequest(\n        `http://localhost:5000/api/users/profile/delete/${userId}`,\n        \"DELETE\",\n        null,\n        { Authorization: \"Bearer \" + auth.token }\n      );\n      \n      props.onDeleteUser(userId);\n      \n    } catch (err) {}\n  };\n\n  return (\n    <React.Fragment>\n      <ErrorModal error={error} onClear={clearError} />\n      <Modal\n        show={showModal}\n        onCancel={closeModalHandler}\n        header={props.location}\n        contentClass=\"place-item__modal-content\"\n        footerClass=\"place-item__modal-actions\"\n        footer={<Button onClick={closeModalHandler}>CLOSE</Button>}\n      >\n        <div className=\"map-container\">DISPLAY MODAL</div>\n      </Modal>\n      <Modal\n        show={showConfirmModal}\n        onCancel={cancelDeleteHandler}\n        header=\"Are you sure ?\"\n        footerClass=\"place-item__modal-actions\"\n        footer={\n          <React.Fragment>\n            <Button inverse onClick={cancelDeleteHandler}>\n              CANCEL\n            </Button>\n            <Button danger onClick={confirmDeleteHandler}>\n              DELETE\n            </Button>\n          </React.Fragment>\n        }\n      >\n        <p>Do you want to proceed and delete your profile ?</p>\n      </Modal>\n      <li className=\"place-item\">\n        <Card className=\"place-item__content\">\n          {isLoading && <LoadingSpinner asOverlay />}\n          <div className=\"place-item__info\">\n            <h2>{props.items.login}</h2>\n            <h3>{props.items.email}</h3>\n          </div>\n          <div className=\"place-item__actions\">\n            {auth.userId === props.items.id && (\n              <Button to={`/profile/${props.items.id}`}>EDIT</Button>\n            )}\n            {auth.userId === props.items.id && (\n              <Button danger onClick={showDeleteWarningHandler}>\n                DELETE\n              </Button>\n            )}\n          </div>\n        </Card>\n      </li>\n    </React.Fragment>\n  );\n};\n\nexport default UserProfile;\n"]},"metadata":{},"sourceType":"module"}